function debounce(func,wait){var timeout;return function(){var context=this,args=arguments;clearTimeout(timeout),timeout=setTimeout((function(){timeout=null,func.apply(context,args)}),wait)}}function makeTeaser(body,terms){var stemmedTerms=terms.map((function(w){return elasticlunr.stemmer(w.toLowerCase())})),termFound=!1,index=0,weighted=[],sentences=body.toLowerCase().split(". ");for(var i in sentences){var words=sentences[i].split(" "),value=8;for(var j in words){if((word=words[j]).length>0){for(var k in stemmedTerms)elasticlunr.stemmer(word).startsWith(stemmedTerms[k])&&(value=40,termFound=!0);weighted.push([word,value,index]),value=2}index+=word.length,index+=1}index+=1}if(0===weighted.length)return body;var windowWeights=[],windowSize=Math.min(weighted.length,10),curSum=0;for(i=0;i<windowSize;i++)curSum+=weighted[i][1];windowWeights.push(curSum);for(i=0;i<weighted.length-windowSize;i++)curSum-=weighted[i][1],curSum+=weighted[i+windowSize][1],windowWeights.push(curSum);var maxSumIndex=0;if(termFound){var maxFound=0;for(i=windowWeights.length-1;i>=0;i--)windowWeights[i]>maxFound&&(maxFound=windowWeights[i],maxSumIndex=i)}var teaser=[],startIndex=weighted[maxSumIndex][2];for(i=maxSumIndex;i<maxSumIndex+windowSize;i++){var word;startIndex<(word=weighted[i])[2]&&(teaser.push(body.substring(startIndex,word[2])),startIndex=word[2]),40===word[1]&&teaser.push("<b>"),startIndex=word[2]+word[0].length,teaser.push(body.substring(word[2],startIndex)),40===word[1]&&teaser.push("</b>")}return teaser.push("â€¦"),teaser.join("")}function formatSearchResultItem(item,terms){return`<article class='box'><h1 class='title'><a class='link' class='link' href='${item.ref}'>${item.doc.title}</a></h1><div class='content mt-2'>${makeTeaser(item.doc.body,terms)}<a href='${item.ref}'>Weiterlesen <span class="icon is-small"><i class="fas fa-arrow-right fa-xs"></i></span></a></div></article>`}function search(){var $searchInput=document.getElementById("search"),$searchResults=document.querySelector(".search-results"),$searchResultsItems=document.querySelector(".search-results__items"),options={bool:"AND",fields:{title:{boost:2},body:{boost:1}}},currentTerm="",index=elasticlunr.Index.load(window.searchIndex);$searchInput.addEventListener("keyup",debounce((function(){var term=$searchInput.value.trim();if(term!==currentTerm&&index&&($searchResults.style.display=""===term?"none":"block",$searchResultsItems.innerHTML="",""!==term)){var results=index.search(term,options);if(0!==results.length){currentTerm=term;for(var i=0;i<Math.min(results.length,10);i++){var item=document.createElement("div");item.classList.add("mb-4"),item.innerHTML=formatSearchResultItem(results[i],term.split(" ")),$searchResultsItems.appendChild(item)}}else $searchResults.style.display="none"}}),150))}function documentReadyCallback(){"dark"===localStorage.getItem("theme")&&(document.body.setAttribute("theme","dark"),document.querySelectorAll("img, picture, video, pre, .sl-image").forEach((img=>img.setAttribute("theme","dark"))),document.querySelectorAll(".vimeo, .youtube, .chart").forEach((video=>video.setAttribute("theme","dark")))),document.querySelector(".navbar-burger").addEventListener("click",(()=>{document.querySelector(".navbar-burger").classList.toggle("is-active"),document.querySelector(".navbar-menu").classList.toggle("is-active")})),document.querySelectorAll("div.navbar-end > .navbar-item").forEach((el=>{location.href.includes(el.getAttribute("href"))&&(document.querySelectorAll("a.navbar-item.is-active").forEach((itm=>itm.classList.remove("is-active"))),el.classList.add("is-active"))})),document.getElementById("nav-search").addEventListener("click",(evt=>{document.querySelector("html").classList.add("is-clipped"),document.getElementById("search-modal").classList.add("is-active"),document.getElementById("search").focus(),document.getElementById("search").select()})),document.querySelector(".modal-close").addEventListener("click",(evt=>{document.querySelector("html").classList.remove("is-clipped"),evt.currentTarget.parentElement.classList.remove("is-active")})),document.querySelector(".modal-background").addEventListener("click",(evt=>{document.querySelector("html").classList.remove("is-clipped"),evt.currentTarget.parentElement.classList.remove("is-active")})),document.getElementById("search").addEventListener("keyup",(()=>{search()})),"undefined"!=typeof mermaid&&mermaid.initialize({startOnLoad:!0}),"undefined"!=typeof chartXkcd&&document.querySelectorAll(".chart").forEach(((el,i)=>{el.setAttribute("id",`chart-${i}`);let svg=document.getElementById(`chart-${i}`),{type:type,...chartData}=JSON.parse(el.textContent);new chartXkcd[type](svg,chartData)})),"undefined"!=typeof Galleria&&document.querySelectorAll(".galleria").forEach(((el,i)=>{el.setAttribute("id",`galleria-${i}`);let{images:images}=JSON.parse(el.textContent);for(let image of images)el.insertAdjacentHTML("beforeend",`<a href="${image.src}"><img src="${image.src}" data-title="${image.title}" data-description="${image.description}"></a>`);Galleria.run(".galleria")})),"undefined"!=typeof mapboxgl&&document.querySelectorAll(".map").forEach(((el,i)=>{el.setAttribute("id",`map-${i}`),mapboxgl.accessToken=el.querySelector(".mapbox-access-token").textContent.trim();let zoom=el.querySelector(".mapbox-zoom").textContent.trim(),map=new mapboxgl.Map({container:`map-${i}`,style:"mapbox://styles/mapbox/streets-v10",center:[-96,37.8],zoom:zoom});map.addControl(new mapboxgl.NavigationControl);let geojson=JSON.parse(el.querySelector(".mapbox-geojson").textContent.trim());const center=[0,0];geojson.features.forEach((function(marker){center[0]+=marker.geometry.coordinates[0],center[1]+=marker.geometry.coordinates[1],new mapboxgl.Marker({color:"#62b32e"}).setLngLat(marker.geometry.coordinates).setPopup(new mapboxgl.Popup({offset:25}).setHTML("<h3>"+marker.properties.title+"</h3><p>"+marker.properties.description+"</p>")).addTo(map)})),center[0]=center[0]/geojson.features.length,center[1]=center[1]/geojson.features.length,map.setCenter(center)})),"undefined"!=typeof renderMathInElement&&renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})}HTMLCollection.prototype.forEach=Array.prototype.forEach,NodeList.prototype.forEach=Array.prototype.forEach,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",documentReadyCallback):documentReadyCallback();var lightbox=new SimpleLightbox(".gallery a",{});function pieanimation(x,y,z){let percentage=x/x;percentage*=100,console.log(percentage);let svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("viewBox","0 0 36 36");let text=document.createElementNS("http://www.w3.org/2000/svg","text");text.setAttribute("x","50%"),text.setAttribute("y","60%"),text.setAttribute("text-anchor","middle"),text.setAttribute("font-size","12"),text.setAttribute("fill","#000"),text.textContent=x,svg.appendChild(text),svg.setAttribute("class","circular-chart");let circle=document.createElementNS("http://www.w3.org/2000/svg","path");circle.setAttribute("class",z),circle.setAttribute("stroke-dasharray",+percentage+", 100"),circle.setAttribute("d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"),svg.appendChild(circle),document.getElementById(y).innerHTML="",document.getElementById(y).appendChild(svg)}function getarticles(){fetch("/sitemap.xml").then((response=>response.text())).then((data=>{console.log(data),pieanimation(data.split("</lastmod>").length-3,"piechart1","circle")})),pieanimation(607,"piechart2","circle1"),pieanimation(62,"piechart3","circle2")}function getcategories(){fetch("/categories/").then((response=>response.text())).then((data=>{let number=data.split('class="mr-4"').length;console.log(data.split('class="mr-4"').length);for(let i=0;i<number;i++)setTimeout((function(){document.getElementById("categoriesnumber").innerText=i}),200*i)}))}function gettags(){fetch("/tags/").then((response=>response.text())).then((data=>{let number=data.split('class="mr-4"').length;console.log(data.split('class="mr-4"').length);for(let i=0;i<number;i++)setTimeout((function(){document.getElementById("tagsnumber").innerText=i}),100*i)}))}const jadeScale=document.querySelectorAll("#tagsnumber");var gotcatgories=0,jadeScaleObserver=new IntersectionObserver((function(entries,observer){entries.forEach((function(entry){entry.isIntersecting&&1!=gotcatgories&&(gettags(),getcategories(),gotcatgories=1)}))}));jadeScale.forEach((function(jadeScale){jadeScaleObserver.observe(jadeScale)}));const pieanim=document.querySelectorAll("#piechart1"),options={rootMargin:"0px"};var gotarticles=0,pieanimObserver=new IntersectionObserver((function(entries,observer){entries.forEach((function(entry){entry.isIntersecting&&1!=gotarticles&&(getarticles(),gotarticles=1)}))}),options);pieanim.forEach((function(pieanim){pieanimObserver.observe(pieanim)})),document.getElementById("teaser")&&setInterval((function(){const content=document.getElementById("teaser").innerHTML;document.getElementById("teaser").innerHTML=content}),25e3);let notifications=document.getElementsByClassName("notify");function start(){document.getElementsByClassName("container").forEach((container=>{container.style.display="block"})),document.getElementsByClassName("footer")[0].style.display="block",document.getElementsByTagName("article").forEach((article=>{article.style.display="block"})),document.getElementsByClassName("pagination")[0].style.display="flex",document.getElementsByClassName("lowhigh")[0].style.display="block"}console.log(notifications),notifications.forEach((notification=>{let expire=new Date(notification.getAttribute("data-date")).getTime();console.log(expire);let now=(new Date).getTime();console.log(now),now<expire&&(notification.style.display="block")})),setTimeout((function(){start()}),800);